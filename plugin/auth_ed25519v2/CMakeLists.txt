INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/include
                    ${CMAKE_SOURCE_DIR}/libmariadb/plugins/auth
                    ${CMAKE_SOURCE_DIR}/libmariadb/include)

MYSQL_ADD_PLUGIN(auth_ed25519v2 server_ed25519v2.cc)

set(OLD_CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${CMAKE_CURRENT_BINARY_DIR}/../../libmariadb")

REGISTER_PLUGIN(TARGET client_ed25519v2
        TYPE MARIADB_CLIENT_PLUGIN_AUTH
        CONFIGURATIONS DYNAMIC STATIC OFF
        DEFAULT DYNAMIC
        SOURCES ed25519v2.cc)

set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${OLD_CMAKE_LIBRARY_OUTPUT_DIRECTORY})
